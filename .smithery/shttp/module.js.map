{
  "version": 3,
  "sources": ["../../index.js"],
  "sourcesContent": ["#!/usr/bin/env node\n\nconst { spawn, execSync } = require('child_process');\nconst path = require('path');\nconst fs = require('fs');\n\n/**\n * Nucleus-MCP NPX Wrapper\n * This script ensures the Python package is installed and then executes it.\n */\n\nfunction checkPython() {\n    try {\n        execSync('python3 --version', { stdio: 'ignore' });\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction isInstalled() {\n    try {\n        execSync('python3 -m mcp_server_nucleus --help', { stdio: 'ignore' });\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction install() {\n    console.error('[Nucleus] Installing Python dependencies (nucleus-mcp)...');\n    try {\n        execSync('python3 -m pip install nucleus-mcp', { stdio: 'inherit' });\n        return true;\n    } catch (e) {\n        console.error('[Nucleus] ERROR: Failed to install nucleus-mcp via pip.');\n        console.error(e.message);\n        return false;\n    }\n}\n\nasync function run() {\n    if (!checkPython()) {\n        console.error('[Nucleus] ERROR: python3 is not installed or not in PATH.');\n        process.exit(1);\n    }\n\n    if (!isInstalled()) {\n        if (!install()) {\n            process.exit(1);\n        }\n    }\n\n    // Determine which command was called\n    const binName = path.basename(process.argv[1]);\n    const args = process.argv.slice(2);\n\n    let pythonArgs = [];\n    if (binName === 'nucleus-init') {\n        pythonArgs = ['-m', 'mcp_server_nucleus.cli', ...args];\n    } else {\n        pythonArgs = ['-m', 'mcp_server_nucleus', ...args];\n    }\n\n    const child = spawn('python3', pythonArgs, {\n        stdio: 'inherit',\n        shell: false\n    });\n\n    child.on('exit', (code) => {\n        process.exit(code);\n    });\n\n    child.on('error', (err) => {\n        console.error('[Nucleus] Error spawning python process:', err);\n        process.exit(1);\n    });\n}\n\nrun();\n"],
  "mappings": ";yPAEA,GAAM,CAAE,MAAAA,EAAO,SAAAC,CAAS,EAAI,EAAQ,eAAe,EAC7CC,EAAO,EAAQ,MAAM,EACrBC,EAAK,EAAQ,IAAI,EAOvB,SAASC,GAAc,CACnB,GAAI,CACA,OAAAH,EAAS,oBAAqB,CAAE,MAAO,QAAS,CAAC,EAC1C,EACX,MAAY,CACR,MAAO,EACX,CACJ,CAEA,SAASI,GAAc,CACnB,GAAI,CACA,OAAAJ,EAAS,uCAAwC,CAAE,MAAO,QAAS,CAAC,EAC7D,EACX,MAAY,CACR,MAAO,EACX,CACJ,CAEA,SAASK,GAAU,CACf,QAAQ,MAAM,2DAA2D,EACzE,GAAI,CACA,OAAAL,EAAS,qCAAsC,CAAE,MAAO,SAAU,CAAC,EAC5D,EACX,OAAS,EAAG,CACR,eAAQ,MAAM,yDAAyD,EACvE,QAAQ,MAAM,EAAE,OAAO,EAChB,EACX,CACJ,CAEA,eAAeM,GAAM,CACZH,EAAY,IACb,QAAQ,MAAM,2DAA2D,EACzE,QAAQ,KAAK,CAAC,GAGbC,EAAY,GACRC,EAAQ,GACT,QAAQ,KAAK,CAAC,EAKtB,IAAME,EAAUN,EAAK,SAAS,QAAQ,KAAK,CAAC,CAAC,EACvCO,EAAO,QAAQ,KAAK,MAAM,CAAC,EAE7BC,EAAa,CAAC,EACdF,IAAY,eACZE,EAAa,CAAC,KAAM,yBAA0B,GAAGD,CAAI,EAErDC,EAAa,CAAC,KAAM,qBAAsB,GAAGD,CAAI,EAGrD,IAAME,EAAQX,EAAM,UAAWU,EAAY,CACvC,MAAO,UACP,MAAO,EACX,CAAC,EAEDC,EAAM,GAAG,OAASC,GAAS,CACvB,QAAQ,KAAKA,CAAI,CACrB,CAAC,EAEDD,EAAM,GAAG,QAAUE,GAAQ,CACvB,QAAQ,MAAM,2CAA4CA,CAAG,EAC7D,QAAQ,KAAK,CAAC,CAClB,CAAC,CACL,CAEAN,EAAI",
  "names": ["spawn", "execSync", "path", "fs", "checkPython", "isInstalled", "install", "run", "binName", "args", "pythonArgs", "child", "code", "err"]
}
